{"version":3,"names":[],"mappings":"","sources":["my.js"],"sourcesContent":["'use strict'\r\n\r\njQuery(document).ready(function () {\r\n  initSlider();\r\n  initDropdown();\r\n  initModal();\r\n  passwordView();\r\n  initBurger();\r\n  filterSlider();\r\n  initProfileMenu();\r\n  initForm();\r\n  imageDownload();\r\n  initChatInv();\r\n  initTab();\r\n  initAccordeon();\r\n  initTag();\r\n  initMask();\r\n  initCredits();\r\n  initScroll();\r\n  initLike();\r\n  initMessagesMenu();\r\n  propCheckbox();\r\n  initMessageOpen();\r\n  lettersImgUpload();\r\n  autosize();\r\n  chatArea();\r\n  chatCam();\r\n  chatContactsBtn();\r\n  initChat();\r\n  emotionStatus();\r\n\r\n  if ($(window).width() >= 1024 && $('.chat__body').length) {\r\n    chatHeight()\r\n  }\r\n\r\n  var hiddenBox = $('.letters__item-photo');\r\n  hiddenBox.slice(0, 4).show(300);\r\n\r\n  $('body').on('click', '.load-more__btn', function (e) {\r\n    e.preventDefault();\r\n    $(this).closest('.load-more').hide()\r\n    hiddenBox.show(300);\r\n  })\r\n\r\n  $('body').on('click', '.hide-btn', function (e) {\r\n    e.preventDefault();\r\n    hiddenBox.slice(4).hide(300);\r\n    $('.load-more').show()\r\n  })\r\n\r\n  $('body').on('click', '.letters__notify-close', function (e) {\r\n    e.preventDefault();\r\n    $(this).closest('.letters__notify').hide(300).remove()\r\n    \r\n  })\r\n});\r\n\r\nfunction initSlider() {\r\n  var swiper = new Swiper('.hero__slider', {\r\n    loop: true,\r\n    pagination: {\r\n      el: '.swiper-pagination',\r\n      clickable: true\r\n    },\r\n  });\r\n\r\n  let options = {};\r\n\r\n  if ($(\".profile__slider .swiper-slide\").length >= 3 ) {\r\n    options = {\r\n      loop: true,\r\n      navigation: {\r\n        nextEl: '.swiper-button-next',\r\n        prevEl: '.swiper-button-prev',\r\n      },\r\n      breakpoints: {\r\n        320: {\r\n          slidesPerView: 2,\r\n          spaceBetween: 4\r\n        },\r\n        1024: {\r\n          slidesPerView: 4,\r\n          spaceBetween: 16\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    options = {\r\n      loop: false,\r\n      navigation: {\r\n        nextEl: '.swiper-button-next',\r\n        prevEl: '.swiper-button-prev',\r\n      },\r\n      breakpoints: {\r\n        320: {\r\n          slidesPerView: 2,\r\n          spaceBetween: 4\r\n        },\r\n        1024: {\r\n          slidesPerView: 4,\r\n          spaceBetween: 16\r\n        }\r\n      }\r\n    }\r\n  }\r\n  \r\n  var swiper2 = new Swiper('.profile__slider', options);\r\n\r\n  let options2 = {};\r\n\r\n  if ($(\".account__slider .swiper-slide\").length >= 3) {\r\n    options2 = {\r\n      loop: true,\r\n      navigation: {\r\n        nextEl: '.swiper-button-next',\r\n        prevEl: '.swiper-button-prev',\r\n      },\r\n      breakpoints: {\r\n        320: {\r\n          slidesPerView: 2,\r\n          spaceBetween: 4\r\n        },\r\n        1024: {\r\n          slidesPerView: 4,\r\n          spaceBetween: 16\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    options2 = {\r\n      loop: false,\r\n      navigation: {\r\n        nextEl: '.swiper-button-next',\r\n        prevEl: '.swiper-button-prev',\r\n      },\r\n      breakpoints: {\r\n        320: {\r\n          slidesPerView: 2,\r\n          spaceBetween: 4\r\n        },\r\n        1024: {\r\n          slidesPerView: 4,\r\n          spaceBetween: 16\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  var swiper3 = new Swiper('.account__slider', options2)\r\n  if ($(window).width() >= 1024 && $('.account__slider').length) {\r\n    swiper3.destroy(true, true);\r\n  }\r\n\r\n  let options3 = {};\r\n\r\n  var swiper4 = new Swiper('.chat__slider', {\r\n    spaceBetween: 0,\r\n    slidesPerView: 'auto',\r\n    navigation: {\r\n      nextEl: '.swiper-button-next',\r\n      prevEl: '.swiper-button-prev',\r\n    },\r\n    breakpoints: {\r\n      1024: {\r\n        slidesPerColumn: 2,\r\n      }\r\n    }\r\n  })\r\n}\r\n\r\nfunction initDropdown() {\r\n  $(\"body\").delegate(\".drop__btn\", \"click\", function (e) {\r\n    e.preventDefault();\r\n    var allDropBoxes = $('.drop__box');\r\n    var currentDropBox = $(this).closest('.drop__box');\r\n    var dropMenu = currentDropBox.find('.drop__menu')\r\n\r\n    if (currentDropBox.hasClass('active')) {\r\n      currentDropBox.removeClass('active');\r\n    } else {\r\n      allDropBoxes.removeClass('active');\r\n      currentDropBox.addClass('active');\r\n    }\r\n  });\r\n\r\n  $('body').on('click', '.hidden', function () {\r\n    if ($(this).is(':checked')) {\r\n      var value = $(this).siblings('.radio-text').html();\r\n      $(this).closest('.drop__value').find('.result-value').html(value);\r\n    }\r\n\r\n    $(this).closest('.drop__box').removeClass('active')\r\n  });\r\n\r\n  jQuery(document).mouseup(function (e) {\r\n    var block = jQuery('.drop__box');\r\n    if (!block.is(e.target)\r\n      && block.has(e.target).length === 0) {\r\n      block.removeClass('active');\r\n    }\r\n  });\r\n}\r\n\r\nfunction initModal() {\r\n  var body = $('body');\r\n\r\n  $('body').on('click', '.modal--opener', function (e) {\r\n    \r\n    if ($(this).data('type') == 'modal-preview') {\r\n      if ($(window).width() > 1024) {\r\n        e.preventDefault();\r\n        body.removeClass();\r\n        body.addClass('modal--active');\r\n        body.addClass('modal-preview');\r\n      }\r\n    } else {\r\n      e.preventDefault();\r\n      body.removeClass();\r\n      var modalType = $(this).data('type');\r\n\r\n      body.addClass(modalType);\r\n      body.addClass('modal--active');\r\n    }\r\n    \r\n  });\r\n\r\n  $('body').on('click', '.modal--close', function (e) {\r\n    e.preventDefault();\r\n    body.removeClass();\r\n  });\r\n\r\n  $('body').on('click', '.modal--overlay', function (e) {\r\n    if ($(e.target).closest('.modal--container,.preview__card').length == 0) {\r\n      body.removeClass();\r\n    }\r\n  });\r\n}\r\n\r\nfunction passwordView() {\r\n  $('body').on('click', '.view-pas', function (e) {\r\n    e.preventDefault();\r\n    var password = $(this).closest('.password-box').find('.form__input')\r\n    if (password.attr('type') == 'password') {\r\n      $(this).addClass('view');\r\n      password.attr('type', 'text');\r\n    } else {\r\n      $(this).removeClass('view');\r\n      password.attr('type', 'password');\r\n    }\r\n    return false;\r\n  });\r\n}\r\n\r\nfunction initBurger() {\r\n  var menuBtn = $('.burger-btn');\r\n  var menu = $('body');\r\n\r\n  menuBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    menu.toggleClass('nav-active')\r\n  });\r\n}\r\n\r\nfunction filterSlider() {\r\n  $(\".filter__slider\").each(function () {\r\n    var minValue = Number($(this).attr('data-min'));\r\n    var maxValue = Number($(this).attr('data-max'));\r\n    var minRange = Number($(this).attr('data-min_range'));\r\n    var maxRange = Number($(this).attr('data-max_range'));\r\n    var step = Number($(this).attr('data-step'));\r\n    $(this).slider({\r\n      range: true,\r\n      min: minValue,\r\n      max: maxValue,\r\n      step: step,\r\n      values: [minRange, maxRange],\r\n      slide: function (event, ui) {\r\n        $(this).find('.ui-slider-handle:eq(0) .slider-range-min').html(ui.values[0]);\r\n        $(this).find('.ui-slider-handle:eq(1) .slider-range-max').html(ui.values[1]);\r\n        $(this).siblings('.filter__slider-text').text(ui.values[0] + \" - \" + ui.values[1]);\r\n\r\n        $(this).siblings('.hidden-min').val(ui.values[0])\r\n        $(this).siblings('.hidden-max').val(ui.values[1])\r\n\r\n      }\r\n    });\r\n    $(this).find('.ui-slider-handle:eq(0)').append('<span class=\"slider-range-min value\">' + $(this).slider('values', 0) + '</span>');\r\n    $(this).find('.ui-slider-handle:eq(1)').append('<span class=\"slider-range-max value\">' + $(this).slider('values', 1) + '</span>');\r\n  })\r\n}\r\n\r\nfunction initProfileMenu() {\r\n  var menuBtn = $('.profile__menu-btn');\r\n  var menu = $('body');\r\n\r\n  menuBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    menu.toggleClass('profile__menu-active')\r\n  });\r\n\r\n  jQuery(document).mouseup(function (e) {\r\n    var block = jQuery('.profile__menu-drop');\r\n    if (!block.is(e.target)\r\n      && block.has(e.target).length === 0) {\r\n      $('body').removeClass('profile__menu-active');\r\n    }\r\n  });\r\n\r\n  var accountBtn = $('.account__settings-btn');\r\n  var account = $('body');\r\n\r\n  accountBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    account.toggleClass('account__settings-active')\r\n  });\r\n\r\n  jQuery(document).mouseup(function (e) {\r\n    var block = jQuery('.account__settings-drop');\r\n    if (!block.is(e.target)\r\n      && block.has(e.target).length === 0) {\r\n      $('body').removeClass('account__settings-active');\r\n    }\r\n  });\r\n\r\n  $('.profile__menu-item').on('click', function (e) {\r\n    e.preventDefault();\r\n    $(this).toggleClass('active')\r\n  })\r\n\r\n  var chatBtn = $('.chat__nav-opener');\r\n  var chat = $('body');\r\n\r\n  chatBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    chat.toggleClass('chat__nav-active')\r\n  });\r\n\r\n  $('.chat__nav-close').on('click', function (e) {\r\n    e.preventDefault();\r\n    account.toggleClass('chat__nav-active')\r\n  });\r\n\r\n  jQuery(document).mouseup(function (e) {\r\n    var block = jQuery('.chat__nav');\r\n    if (!block.is(e.target)\r\n      && block.has(e.target).length === 0) {\r\n      $('body').removeClass('chat__nav-active');\r\n    }\r\n  });\r\n}\r\n\r\nfunction initForm() {\r\n  var current_fs, next_fs, previous_fs;\r\n\r\n  $(\".next\").click(function (e) {\r\n    e.preventDefault();\r\n    current_fs = $(this).parents('.form__step');\r\n    next_fs = $(this).parents('.form__step').next();\r\n\r\n    $(\"#progressbar li\").eq($(\".form__step\").index(next_fs)).addClass(\"active\");\r\n    $(\"#progressbar li\").eq($(\".form__step\").index(next_fs)).addClass(\"current\").siblings().removeClass('current');\r\n\r\n    next_fs.addClass(\"active\");\r\n    current_fs.removeClass(\"active\");\r\n  });\r\n\r\n  $(\".previous\").click(function (e) {\r\n    e.preventDefault();\r\n    current_fs = $(this).parents('.form__step');\r\n    previous_fs = $(this).parents('.form__step').prev();\r\n\r\n    $(\"#progressbar li\").eq($(\".form__step\").index(current_fs)).removeClass(\"active\");\r\n    $(\"#progressbar li\").eq($(\".form__step\").index(previous_fs)).addClass(\"current\").siblings().removeClass('current');\r\n    previous_fs.addClass(\"active\");\r\n    current_fs.removeClass(\"active\");\r\n  });\r\n}\r\n\r\nfunction imageDownload() {\r\n  $(\".inputfile\").change(function () {\r\n    readURL(this);\r\n  });\r\n\r\n  $('.upload__img-delete').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.upload__img-row').find('input:checked').closest('.upload__img-col').remove()\r\n    \r\n\r\n    if ($('.filled').length <= 0) {\r\n      $('.upload__img-wrapp').removeClass('fill')\r\n    }\r\n  })\r\n}\r\n\r\nfunction readURL(input) {\r\n  var imgBox = $('<div class=\"upload__img-col current active\"></div>')\r\n  imgBox.append('<div class=\"upload__img img-bg\"></div>')\r\n  imgBox.append('<label class=\"radio\"><input type=\"radio\" class=\"hidden\" name=\"1\"><span class=\"radio-btn\"></span></label>')\r\n\r\n  if ($('.upload__img-wrapp').hasClass('upload__img-edit')) {\r\n    $('.upload__img-row').append(imgBox)\r\n  } else if ($('.upload__img-col').last().hasClass('current')) {\r\n    setTimeout(function () {\r\n      // var newBlock = $('.upload__img-col').first().clone().removeClass('filled').addClass('current');\r\n      imgBox.find('.upload__img').removeAttr('style')\r\n      imgBox.find('input').val('')\r\n      $('.upload__img-row').append(imgBox)\r\n    }, 300);\r\n  }\r\n\r\n  if (input.files && input.files[0]) {\r\n    var targetParent = $(input).closest('.upload__img-wrapp').find('.upload__img-col.current');\r\n    var target = targetParent.find('.upload__img');\r\n    var reader = new FileReader();\r\n    reader.onload = function (e) {\r\n      $(target).css('background-image', 'url(' + e.target.result + ')');\r\n      $(target).hide();\r\n      $(target).fadeIn(650);\r\n    }\r\n    $('.upload__img-wrapp').addClass('fill')\r\n    targetParent.removeClass('current').addClass('filled').next().addClass('current active')\r\n    reader.readAsDataURL(input.files[0]);\r\n  }\r\n}\r\n\r\nfunction initProggres(time) {\r\n  var start = 100;\r\n  var time = Math.round(time*1000/100);\r\n  var progressEl = $('.chat__offer-progress:not(.in-prog)');\r\n  var intervalId= setInterval(function () {\r\n    if (start < 0) {\r\n      clearInterval(intervalId)\r\n      // progressEndCalback(progressEl)\r\n\r\n    } else {\r\n      progressEl.addClass('in-prog')\r\n      progressEl.css(\"width\", start + '%')\r\n      progressEl.attr('data-val', start)\r\n    }\r\n    start--\r\n  }, time)\r\n}\r\n\r\nfunction progressEndCalback(progressEl) {\r\n  progressEl.removeClass('in-prog')\r\n  progressEl.closest('.chat__offer-card').remove()\r\n\r\n  var dataNum = progressEl.closest('.chat__offer-card').data('card');\r\n  \r\n  $('.chat__offer-togler').attr('data-num', dataNum).parent().remove()\r\n\r\n  if ($('.chat__offer-box').find('.chat__offer-card').length == 0) {\r\n    $('.chat__offer').removeClass('active');\r\n    $('body').removeClass('chat__offer-active');\r\n  }\r\n\r\n  if ($('.chat__offer-card.visible').length == 0) {\r\n    $('body').removeClass('chat__offer-active')\r\n  }\r\n}\r\n\r\nfunction initChatInv() {\r\n  $('body').on('click', '.chat__offer-togler', function (e) {\r\n    e.preventDefault();\r\n    var dataNum = $(this).data('num');\r\n\r\n    $(this).closest('.chat__offer').find('.chat__offer-card[data-card=\"' + dataNum +'\"]').slideToggle(200);\r\n    $(this).toggleClass('active');\r\n  })\r\n\r\n  $('body').on('click', '.chat__offer-collapse', function (e) {\r\n    e.preventDefault();\r\n\r\n    var dataCard = $(this).closest('.chat__offer-card').data('card');\r\n\r\n    $(this).closest('.chat__offer-card').removeClass('visible').slideUp();\r\n    $(this).closest('.chat__offer').find('.chat__offer-togler[data-num=\"' + dataCard +'\"]').removeClass('active')\r\n\r\n    if ($('.chat__offer-card.visible').length == 0) {\r\n      $('body').removeClass('chat__offer-active')\r\n    }\r\n  })\r\n\r\n  $('body').on('click', '.chat__offer-close', function (e) {\r\n    e.preventDefault();\r\n    var dataCard = $(this).closest('.chat__offer-card').data('card');\r\n\r\n    $(this).closest('.chat__offer').find('.chat__offer-togler[data-num=\"' + dataCard + '\"]').parent().remove()\r\n    $(this).closest('.chat__offer-card').remove();\r\n\r\n    if ($('.chat__offer-box').find('.chat__offer-card').length == 0) {\r\n      $('.chat__offer').removeClass('active');\r\n      $('body').removeClass('chat__offer-active');\r\n    }\r\n\r\n    if ($('.chat__offer-card.visible').length == 0) {\r\n      $('body').removeClass('chat__offer-active')\r\n    }\r\n  })\r\n\r\n  $('body').on('click', '.card-min', function (e) {\r\n    e.preventDefault();\r\n    $('.chat__offer-card').slideUp();\r\n  })\r\n\r\n  $('body').on('click', '.card-max', function (e) {\r\n    e.preventDefault();\r\n    $('.chat__offer-card').slideDown();\r\n  })\r\n\r\n  if ($(window).width() < 1024) {\r\n    $('body').on('click', '.chat__offer-label', function (e) {\r\n      e.preventDefault();\r\n      $('body').toggleClass('chat__offer-active')\r\n      \r\n      if ($('body').hasClass('chat__offer-active')) {\r\n        $('.chat__offer-card').addClass('visible').slideDown()\r\n      } else {\r\n        $('.chat__offer-card').removeClass('visible').slideUp()\r\n      }\r\n    })\r\n  } \r\n}\r\n\r\nfunction initTab() {\r\n  $('.tabs__content-item').hide();\r\n  $('.tabs__content-item.active').show();\r\n\r\n  $('body').on('click', '.tabs__nav-btn--js', function (e) {\r\n    e.preventDefault();\r\n    var id = $(this).attr('data-tab')\r\n    var content = $(this).closest('.tabs').find('.tabs__content-item[data-tab=\"' + id + '\"]');\r\n    $(this).closest('.tabs__nav-js').find('.tabs__nav-btn--js.active').removeClass('active');\r\n    $(this).addClass('active');\r\n    $($('.tabs__content-item[data-tab=\"' + id + '\"]')[0]).fadeIn(400).addClass('active').siblings('.active').hide().removeClass('active');\r\n  });\r\n}\r\n\r\nfunction initAccordeon() {\r\n  var dropBtn = jQuery('.accordeon__btn');\r\n\r\n  dropBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    var link = $(this);\r\n    var closestUl = link.closest('ul');\r\n    var parallelActiveLinks = closestUl.find('.active')\r\n    var closestLi = link.closest('li');\r\n    var linkStatus = closestLi.hasClass('active');\r\n    var count = 0;\r\n\r\n    closestUl.find('.accordeon__drop').slideUp(function () {\r\n      if (++count == closestUl.find('.accordeon__drop').length)\r\n        parallelActiveLinks.removeClass('active');\r\n    });\r\n\r\n    if (!linkStatus) {\r\n      closestLi.children('.accordeon__drop').slideDown();\r\n      closestLi.addClass('active');\r\n    }\r\n  });\r\n}\r\n\r\nfunction initTag() {\r\n  $('body').on('click', '.gift-tag', function () {\r\n    var $this = $(this);\r\n    var $dataId = $(this).data('id')\r\n    var $parent = $this.closest(\".profile__gift-item\");\r\n    var $text = $parent.find('.profile__gift-text').clone();\r\n    var tagLi = $('<li>');\r\n    var tagItem = ('<div class=\"gift__tag\"><button class=\"gift__tag-close\"></button></div>');\r\n    tagLi.attr('data-tag', $dataId).addClass('gift__tag-item').append(tagItem);\r\n    tagLi.find('.gift__tag').prepend($text);\r\n\r\n    if ($this.is('input[type=\"checkbox\"]:checked')) {\r\n      $(\".gift__tag-list\").append(tagLi);\r\n    } else {\r\n      $(\".gift__tag-list\").find('.gift__tag-item[data-tag=\"' + $dataId + '\"]').remove();\r\n    }\r\n  });\r\n\r\n  $('body').on('click', '.gift__tag-close', function (e) {\r\n    e.preventDefault();\r\n\r\n    var $parent = $(this).closest('.gift__tag-item');\r\n    var tagData = $parent.data('tag');\r\n    $('.profile__gift-item').find('.gift-tag[data-id=\"' + tagData + '\"]').prop(\"checked\", false);\r\n    $parent.remove()\r\n  });\r\n}\r\n\r\nfunction initMask() {\r\n  $('.card-mask').mask('9999-9999-9999-9999');\r\n  $('.card-date').mask('99          /          99');\r\n  $('.card-cvv').mask('999')\r\n}\r\n\r\nfunction initCredits() {\r\n  $('body').on('click', '.credits-js', function () {\r\n    var $this = $(this);\r\n    var val = $this.closest('.radio').find('.credits-val').text();\r\n    var cost = $this.closest('.radio').find('.credits-cost').text();\r\n    var wrapp = $this.closest('.radio').find('.radio-wrapp').clone();\r\n\r\n    wrapp.find('.radio-btn').remove()\r\n    $('.credits-section').addClass('active')\r\n    $('.credits__pay-info').html(wrapp)\r\n    $('.credits__btn').find('.credits-val').text(val)\r\n    $('.credits__btn').find('.credits-cost').text(cost)\r\n  })\r\n\r\n  $('body').on('click', '.credits-back', function (e) {\r\n    e.preventDefault();\r\n\r\n    $('.credits-section').removeClass('active')\r\n  })\r\n}\r\n\r\nfunction initScroll() {\r\n  if ($(\".drop__menu\").length) {\r\n    $(\".drop__menu\").mCustomScrollbar({\r\n      alwaysShowScrollbar: 0,\r\n      scrollbarPosition: 'outside',\r\n      scrollInertia: 300\r\n    });\r\n  }\r\n  \r\n  if ($(window).width() >= 1024 && $(\".custom-scroll\").length) {\r\n    $(\".custom-scroll\").mCustomScrollbar({\r\n      alwaysShowScrollbar: 0,\r\n      scrollbarPosition: 'outside',\r\n      scrollInertia: 300,\r\n      advanced: { updateOnContentResize: true }\r\n    });\r\n  }\r\n}\r\n\r\nfunction initLike() {\r\n  $('body').on('click', '.lb-like', function (e) {\r\n    e.preventDefault();\r\n\r\n    $(this).toggleClass('is-liked')\r\n  })\r\n}\r\n\r\nfunction initMessagesMenu() {\r\n  var menuBtn = $('.messages__menu-burger');\r\n  var menu = $('body');\r\n\r\n  menuBtn.on('click', function (e) {\r\n    e.preventDefault();\r\n    menu.toggleClass('messages__menu-active')\r\n  });\r\n}\r\n\r\nfunction propCheckbox() {\r\n  $('body').on('click', '.select-all', function () {\r\n    $('.messages__item-checkbox .hidden').prop('checked', this.checked);\r\n  });\r\n\r\n  $('body').on('click', '.messages__sort-menu input[type=\"radio\"]', function () {\r\n    var val = $(this).data('sort')\r\n\r\n    $('.messages__item-checkbox .hidden').prop('checked', false);\r\n    $('.messages__sort-menu .select-all').prop('checked', this.checked);\r\n\r\n    if (val == 'all') {\r\n      $('.messages__item-checkbox .hidden').prop('checked', this.checked);\r\n    } else {\r\n      $('.' + val).find('.messages__item-checkbox .hidden').prop('checked', this.checked);\r\n    }\r\n  });\r\n}\r\n\r\nfunction initMessageOpen() {\r\n  $('body').on('click', '.letters__answer-opener', function () {\r\n    $('.letters__answer-text').find('.form__input').removeAttr('disabled');\r\n    $('.letters__answer-btns').addClass('active');\r\n    $(this).remove();\r\n  });\r\n}\r\n\r\nfunction lettersImgUpload() {\r\n  var imgWrap = \"\";\r\n  var imgArray = [];\r\n\r\n  $('.letters__upload-inputfile').each(function () {\r\n    $(this).on('change', function (e) {\r\n      imgWrap = $(this).closest('.letters__answer-box').find('.upload__img-wrap');\r\n      var maxLength = $(this).attr('data-max_length');\r\n\r\n      var files = e.target.files;\r\n      var filesArr = Array.prototype.slice.call(files);\r\n      var iterator = 0;\r\n      filesArr.forEach(function (f, index) {\r\n\r\n        if (!f.type.match('image.*')) {\r\n          return;\r\n        }\r\n\r\n        if (imgArray.length > maxLength) {\r\n          return false\r\n        } else {\r\n          var len = 0;\r\n          for (var i = 0; i < imgArray.length; i++) {\r\n            if (imgArray[i] !== undefined) {\r\n              len++;\r\n            }\r\n          }\r\n          if (len > maxLength) {\r\n            return false;\r\n          } else {\r\n            imgArray.push(f);\r\n\r\n            var reader = new FileReader();\r\n            reader.onload = function (e) {\r\n              var html = \"<div class='upload__img-box'><div style='background-image: url(\" + e.target.result + \")' data-number='\" + $(\".upload__img-close\").length + \"' data-file='\" + f.name + \"' class='img-bg'><div class='upload__img-close'></div></div></div>\";\r\n              imgWrap.append(html);\r\n              iterator++;\r\n            }\r\n            reader.readAsDataURL(f);\r\n          }\r\n        }\r\n      });\r\n      setTimeout(function () {\r\n        if ($(window).width() >= 1024) {\r\n          chatHeight()\r\n        }\r\n      }, 300);\r\n    });\r\n  });\r\n\r\n  $('body').on('click', \".upload__img-close\", function (e) {\r\n    var file = $(this).parent().data(\"file\");\r\n    for (var i = 0; i < imgArray.length; i++) {\r\n      if (imgArray[i].name === file) {\r\n        imgArray.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n    $(this).parent().parent().remove();\r\n    if ($(window).width() >= 1024) {\r\n      chatHeight()\r\n    }\r\n  });\r\n}\r\n\r\nfunction autosize() {\r\n  var text = $('.autosize');\r\n\r\n  text.each(function () {\r\n    $(this).attr('rows', 1);\r\n    resize($(this));\r\n  });\r\n\r\n  text.on('input', function () {\r\n    resize($(this));\r\n  });\r\n\r\n  function resize($text) {\r\n    $text.css('height', 'auto');\r\n    $text.css('height', $text[0].scrollHeight + 'px');\r\n  }\r\n\r\n}\r\n\r\nfunction letterCounter($text) {\r\n  var cntMaxLength = $text.attr('maxlength');\r\n  var $length = $text.html().length\r\n  if ($length >= '20') {\r\n    $('.chat__length').text($length + '/' + cntMaxLength);\r\n    $('.chat__length').addClass('is-visible')\r\n  } else if ($length < '20') {\r\n    $('.chat__length').removeClass('is-visible')\r\n  }\r\n\r\n  if ($length >= cntMaxLength) {\r\n    $('.chat__length').addClass('error')\r\n  } else if ($length < cntMaxLength) {\r\n    $('.chat__length').removeClass('error')\r\n  }\r\n}\r\n\r\nfunction chatHeight() {\r\n  let chatBox = $('.chat__messages')\r\n  let chatHeight = $('.chat__body').outerHeight(true)\r\n  let messageHeight = $('.chat__messages-area').outerHeight(true)\r\n  let imgHeight = $('.upload__img-wrap').outerHeight(true)\r\n  let videoHeight\r\n\r\n  if ($('.chat__video-box').hasClass('active')) {\r\n    videoHeight = 248\r\n  } else {\r\n    videoHeight = 0\r\n  }\r\n\r\n  chatBox.css('height', chatHeight - messageHeight - imgHeight - videoHeight - '44')\r\n\r\n  $('.custom-scroll').mCustomScrollbar(\"update\");\r\n}\r\n\r\nfunction chatArea() {\r\n  $('.chat__textarea').off('paste').on('paste', function (e) {\r\n    e.preventDefault();\r\n    var text = e.originalEvent.clipboardData ? e.originalEvent.clipboardData.getData('text/plain') : window.clipboardData.getData('Text');\r\n    insertText(text);\r\n  });\r\n  \r\n  $('.chat__textarea').on('keyup paste', function (e) {\r\n    e.preventDefault();\r\n  \r\n    if ($(window).width() >= 1024) {\r\n      chatHeight()\r\n    }\r\n    letterCounter($(this))\r\n  });\r\n\r\n  $('.chat__messages-emoticon').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.chat__emoticon').toggleClass('active')\r\n  })\r\n}\r\n\r\nfunction insertText(text) {\r\n  if (document.queryCommandSupported('insertText')) {\r\n    document.execCommand('insertText', false, text);\r\n  }\r\n  \r\n  else {\r\n    var range = document.getSelection().getRangeAt(0);\r\n    range.deleteContents();\r\n    var textNode = document.createTextNode(text);\r\n    range.insertNode(textNode);\r\n    range.selectNodeContents(textNode);\r\n    range.collapse(false);\r\n\r\n    var selection = window.getSelection();\r\n    selection.removeAllRanges();\r\n    selection.addRange(range);\r\n  }\r\n};\r\n\r\nfunction chatCam() {\r\n  $('.chat__cam-girl').on('click', function (e) {\r\n    e.preventDefault()\r\n  \r\n    if ($(this).hasClass('active')) {\r\n      $(this).removeClass('active')\r\n      $('.chat__video-box').removeClass('active');\r\n      $('.chat__head').removeClass('active');\r\n  \r\n      if ($(window).width() < 1023) {\r\n        $('.chat__cam-man').removeClass('active')\r\n        $('.chat__col-3').removeClass('camera-active');\r\n        $('.chat__video-box').removeClass('camera-man-active');\r\n      }\r\n    } else {\r\n      $(this).addClass('active')\r\n      $('.chat__video-box').addClass('active');\r\n      $('.chat__head').addClass('active');\r\n    }\r\n  \r\n    if ($(window).width() >= 1024) {\r\n      chatHeight()\r\n    }\r\n  })\r\n  \r\n  $('.chat__cam-man').on('click', function (e) {\r\n    e.preventDefault()\r\n    $(this).toggleClass('active');\r\n    $('.chat__col-3').toggleClass('camera-active');\r\n    $('.chat__video-box').toggleClass('camera-man-active');\r\n    $('.custom-scroll').mCustomScrollbar(\"update\");\r\n  })\r\n}\r\n\r\nfunction chatContactsBtn() {\r\n  $('.search-btn').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.chat__contacts-search').addClass('active')\r\n  })\r\n  \r\n  $('.search-close').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.chat__contacts-search').removeClass('active')\r\n  })\r\n  \r\n  $('.chat__contacts-toggle').on('click', function (e) {\r\n    e.preventDefault()\r\n  \r\n    if ($(this).hasClass('active')) {\r\n      $(this).removeClass('active');\r\n      $('.chat__contacts-list--item').not('.is-favorite').show()\r\n    } else {\r\n      $(this).addClass('active')\r\n      $('.chat__contacts-list--item').not('.is-favorite').hide()\r\n    }\r\n  })\r\n}\r\n\r\nfunction initChat() {\r\n  $('.chat-opener').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.chat-section').addClass('chat-active')\r\n    if ($(window).width() >= 1024) {\r\n      chatHeight()\r\n    }\r\n  })\r\n  \r\n  $('.chat-close').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.chat-section').removeClass('chat-active')\r\n  })\r\n}\r\n\r\nfunction emotionStatus() {\r\n  $('.emotion__opener').on('click', function (e) {\r\n    e.preventDefault()\r\n    $(this).closest('.emotion__drop-box').toggleClass('active')\r\n  })\r\n\r\n  jQuery(document).mouseup(function (e) {\r\n    var block = jQuery('.emotion__drop-box');\r\n    if (!block.is(e.target)\r\n      && block.has(e.target).length === 0) {\r\n      block.removeClass('active');\r\n    }\r\n  });\r\n  $('.emotion__btn').on('click', function (e) {\r\n    e.preventDefault()\r\n    $('.emotion__drop-box').removeClass('active')\r\n\r\n    var icon = $(this).find('i').clone()\r\n    var text = $(this).find('strong').clone()\r\n\r\n    $(this).closest('.emotion__drop-box').find('.emotion__opener').empty().append(text, icon)\r\n  })\r\n}\r\n\r\n\r\n\r\n\r\n"],"file":"my.js"}